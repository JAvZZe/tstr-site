---
---

<header style="background: linear-gradient(135deg, #667eea 0%, #059669 100%); color: white; padding: 3rem 2rem; text-align: center; position: relative;">
  <nav id="auth-nav" style="position: absolute; top: 2rem; right: 2rem; display: flex; gap: 1rem;">
    <!-- Navigation will be populated by JavaScript -->
  </nav>
  <h1 style="font-size: 0; margin-bottom: 0.5rem; font-weight: 700; display: inline-flex; width: auto; padding: 2rem; min-width: 200px; margin: 0 auto 0.5rem auto; background: rgba(255, 255, 255, 0.1); border-radius: 20px; backdrop-filter: blur(10px); border: 2px solid rgba(255, 255, 255, 0.2);">
    <div style="display: flex; align-items: center; justify-content: center;">
      <a href="/" style="display: flex; align-items: center; text-decoration: none; color: inherit;">
        <img src="/TSTR-Logo-60px.png" alt="TSTR Logo" style="height: 60px; width: auto; margin-right: 1.5rem;"/>
        <div>
          <span style="font-size: 2.2rem; line-height: 1; margin-bottom: -0.2rem; letter-spacing: 0.1em; display: block;">TSTR</span>
          <span style="font-size: 2.8rem; line-height: 1; letter-spacing: 0.05em; display: block;">hub</span>
        </div>
      </a>
    </div>
  </h1>
  <p>Specialist Testing Services, Products and Solutions Directory</p>
  <p style="font-size: 1rem; margin-top: 0.5rem; opacity: 0.85;">
    Oil & Gas • Biopharma & Life Sciences • Environmental • Materials Testing
  </p>
</header>

<script>
  import { supabaseBrowser } from '../lib/supabase-browser'

  async function updateAuthNav() {
    const nav = document.getElementById('auth-nav')
    if (!nav) return

    try {
      const { data: { session } } = await supabaseBrowser.auth.getSession()
      const isLoggedIn = !!session?.user

      nav.innerHTML = ''

      // Common links
      const pricingLink = document.createElement('a')
      pricingLink.href = '/pricing'
      pricingLink.textContent = 'Pricing'
      pricingLink.style.cssText = `
        background: white;
        color: #667eea;
        padding: 0.75rem 1.5rem;
        border-radius: 8px;
        text-decoration: none;
        font-weight: 600;
        transition: all 0.3s ease;
        box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        cursor: pointer;
      `
      pricingLink.onmouseover = () => pricingLink.style.transform = 'translateY(-1px)'
      pricingLink.onmouseout = () => pricingLink.style.transform = 'translateY(0)'

      const browseLink = document.createElement('a')
      browseLink.href = '/browse'
      browseLink.textContent = 'Browse'
      browseLink.style.cssText = `
        background: transparent;
        color: white;
        padding: 0.75rem 1.5rem;
        border: 2px solid white;
        border-radius: 8px;
        text-decoration: none;
        font-weight: 600;
        transition: all 0.3s ease;
        cursor: pointer;
      `
      browseLink.onmouseover = () => {
        browseLink.style.background = 'white'
        browseLink.style.color = '#667eea'
      }
      browseLink.onmouseout = () => {
        browseLink.style.background = 'transparent'
        browseLink.style.color = 'white'
      }

      if (isLoggedIn) {
        // Logged in: Pricing, Browse, My Account
        const accountLink = document.createElement('a')
        accountLink.href = '/account'
        accountLink.textContent = 'My Account'
        accountLink.style.cssText = `
          background: linear-gradient(135deg, #667eea 0%, #059669 100%);
          color: white;
          padding: 0.75rem 1.5rem;
          border-radius: 8px;
          text-decoration: none;
          font-weight: 600;
          transition: all 0.3s ease;
          box-shadow: 0 2px 8px rgba(0,0,0,0.2);
          cursor: pointer;
        `
        accountLink.onmouseover = () => accountLink.style.transform = 'translateY(-1px)'
        accountLink.onmouseout = () => accountLink.style.transform = 'translateY(0)'

        nav.appendChild(accountLink)
        nav.appendChild(browseLink)
        nav.appendChild(pricingLink)
      } else {
        // Not logged in: Pricing, Browse, Login/Register
        const loginLink = document.createElement('a')
        loginLink.href = '/login'
        loginLink.textContent = 'Login / Register'
        loginLink.style.cssText = `
          background: linear-gradient(135deg, #667eea 0%, #059669 100%);
          color: white;
          padding: 0.75rem 1.5rem;
          border-radius: 8px;
          text-decoration: none;
          font-weight: 600;
          transition: all 0.3s ease;
          box-shadow: 0 2px 8px rgba(0,0,0,0.2);
          cursor: pointer;
        `
        loginLink.onmouseover = () => loginLink.style.transform = 'translateY(-1px)'
        loginLink.onmouseout = () => loginLink.style.transform = 'translateY(0)'

        nav.appendChild(loginLink)
        nav.appendChild(browseLink)
        nav.appendChild(pricingLink)
      }
    } catch (error) {
      console.error('Error updating auth nav:', error)
      // Fallback to basic nav
      nav.innerHTML = '<a href="/pricing" style="background: white; color: #667eea; padding: 0.75rem 1.5rem; border-radius: 8px; text-decoration: none; font-weight: 600;">Pricing</a>'
    }
  }

  // Update nav on load
  updateAuthNav()

  // Listen for auth changes
  supabaseBrowser.auth.onAuthStateChange((event, session) => {
    updateAuthNav()
  })
</script>